name: ðŸ§ª Testar Todos ExercÃ­cios
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Compilar e Rodar ExercÃ­cios
      run: |
        # Procura todos os exercÃ­cios em qualquer subpasta
        for dir in **/*/; do
          if [[ "$dir" == *"exercicio"* || "$dir" == *"IMC"* ]]; then
            echo "ðŸ§ª Testando $dir"
            cd "$dir"
            if [ -f "main.cpp" ] || [ -f "*.cpp" ]; then
              g++ -std=c++20 *.cpp -o main 2>/dev/null && ./main
            elif [ -f "CMakeLists.txt" ]; then
              cmake . && make && ./main 2>/dev/null
            fi || echo "âŒ $dir falhou ou sem main.cpp"
            cd - > /dev/null
          fi
        done

